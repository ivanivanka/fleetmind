<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markster FleetMind AI - Warehouse Fleet Orchestration</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='6' fill='%230a0a0a'/><circle cx='16' cy='16' r='8' fill='none' stroke='%2300cc44' stroke-width='2'/><circle cx='16' cy='16' r='3' fill='%2300cc44'/></svg>">
</head>
<body>
    <!-- Top Bar -->
    <div class="topbar">
        <div class="topbar-left">
            <div class="logo">
                <svg viewBox="0 0 24 24" fill="none" stroke="#00cc44" stroke-width="2">
                    <circle cx="12" cy="12" r="9"/>
                    <circle cx="12" cy="12" r="3" fill="#00cc44"/>
                    <line x1="12" y1="3" x2="12" y2="6"/>
                    <line x1="12" y1="18" x2="12" y2="21"/>
                    <line x1="3" y1="12" x2="6" y2="12"/>
                    <line x1="18" y1="12" x2="21" y2="12"/>
                </svg>
                <span><span class="logo-muted">Markster</span> Fleet<span class="logo-accent">Mind</span> AI</span>
            </div>
            <div class="status-badge live" id="sim-badge">
                <span class="dot"></span>
                <span id="sim-status">Simulation Live</span>
            </div>
        </div>
        <div class="topbar-right">
            <div class="metric">
                <span>Tick:</span>
                <span class="value" id="tick-count">0</span>
            </div>
            <div class="metric">
                <span>Uptime:</span>
                <span class="value" id="uptime">0:00</span>
            </div>
            <div class="metric">
                <span>WS:</span>
                <span class="value" id="ws-status">Connecting</span>
            </div>
            <div class="topbar-credit">
                <a href="https://www.linkedin.com/in/ivanivanka/" target="_blank" rel="noreferrer noopener">Demo by Ivan @ Markster</a>
                <span class="sep">•</span>
                <a href="https://wa.me/12127181149" target="_blank" rel="noreferrer noopener">WhatsApp: +1 212 718 1149</a>
            </div>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="main">
        <!-- Canvas Area -->
        <div class="canvas-area">
            <div class="canvas-header">
                <h3>Warehouse Floor</h3>
                <div class="canvas-legend">
                    <div class="legend-item"><div class="legend-dot" style="background:#333"></div> Shelf</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#ffaa00"></div> Charge</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#3388ff"></div> Pickup</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#aa44ff"></div> Dropoff</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#00cc44;border-radius:50%"></div> Robot</div>
                </div>
            </div>
            <div class="canvas-wrapper">
                <canvas id="warehouse-canvas"></canvas>
            </div>
            <div class="metrics-bar">
                <div class="metric-card">
                    <div class="label">Throughput</div>
                    <div class="value green" id="m-throughput">0.0</div>
                    <div class="sub">tasks/min</div>
                </div>
                <div class="metric-card">
                    <div class="label">Completed</div>
                    <div class="value" id="m-completed">0</div>
                    <div class="sub" id="m-failed">0 failed</div>
                </div>
                <div class="metric-card">
                    <div class="label">Queue</div>
                    <div class="value blue" id="m-queue">0</div>
                    <div class="sub">pending</div>
                </div>
                <div class="metric-card">
                    <div class="label">Utilization</div>
                    <div class="value" id="m-utilization">0%</div>
                    <div class="sub" id="m-active">0 active</div>
                </div>
                <div class="metric-card">
                    <div class="label">Avg Battery</div>
                    <div class="value" id="m-battery">0%</div>
                    <div class="sub" id="m-charging">0 charging</div>
                </div>
                <div class="metric-card">
                    <div class="label">Cost Saved</div>
                    <div class="value green" id="m-cost">$0</div>
                    <div class="sub">vs manual ops</div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- AI Insight — prominent panel -->
            <div class="ai-insight">
                <div class="ai-header">
                    <span class="ai-badge">Gemini AI</span>
                    <span class="ai-label">Fleet Intelligence</span>
                </div>
                <div class="insight-text" id="ai-insight">Initializing fleet intelligence...</div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button class="btn primary" onclick="addTask()">+ Add Task</button>
                <button class="btn" onclick="requestAIInsight()">AI Insight</button>
                <button class="btn" onclick="resetDemo()">Reset Demo</button>
                <button class="btn danger" id="estop-btn" onclick="emergencyStopAll()">E-Stop All</button>
            </div>
            <div class="action-status" id="action-status"></div>

            <!-- Fleet -->
            <div class="sidebar-section">
                <div class="section-header">
                    <h3>Fleet</h3>
                    <span class="count" id="fleet-count">0</span>
                </div>
                <div class="section-content" id="robot-list"></div>
            </div>

            <!-- Tasks -->
            <div class="sidebar-section">
                <div class="section-header">
                    <h3>Recent Tasks</h3>
                    <span class="count" id="task-count">0</span>
                </div>
                <div class="section-content" id="task-list"></div>
            </div>

            <!-- Alerts -->
            <div class="sidebar-section">
                <div class="section-header">
                    <h3>Alerts</h3>
                    <span class="count" id="alert-count">0</span>
                </div>
                <div class="section-content" id="alert-list">
                    <div class="empty-state">No active alerts</div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
